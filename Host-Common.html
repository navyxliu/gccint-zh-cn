<html lang="zh">
<head>
<title>Host Common - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Host-Config.html#Host-Config" title="Host Config">
<link rel="next" href="Filesystem.html#Filesystem" title="Filesystem">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2010 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.3版本或者之后的任何版本，对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Host-Common"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Filesystem.html#Filesystem">Filesystem</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Host-Config.html#Host-Config">Host Config</a>
<hr>
</div>

<h3 class="section">18.1 主机通用信息</h3>

<p><a name="index-host-hooks-4894"></a><a name="index-host-functions-4895"></a>
<!-- Some things are just not portable, even between similar operating systems, -->
<!-- and are too difficult for autoconf to detect.  They get implemented using -->
<!-- hook functions in the file specified by the @var{host_hook_obj} -->
<!-- variable in @file{config.gcc}. -->
有些东西不具有可移植性，甚至是在相似的操作系统之间，并且autoconf也难以检测出。它们是通过钩子函数来实现的，这些函数放在 <samp><span class="file">config.gcc</span></samp>中<var>host_hook_obj</var>变量指定的文件中。

<div class="defun">
&mdash; Host Hook: void <b>HOST_HOOKS_EXTRA_SIGNALS</b> (<var>void</var>)<var><a name="index-HOST_005fHOOKS_005fEXTRA_005fSIGNALS-4896"></a></var><br>
<blockquote><!-- This host hook is used to set up handling for extra signals.  The most -->
     <!-- common thing to do in this hook is to detect stack overflow. -->
      <p>该主机钩子用于建立对额外信号的处理。最通用的事情是在这个钩子中去检测栈溢出。
</p></blockquote></div>

<div class="defun">
&mdash; Host Hook: void * <b>HOST_HOOKS_GT_PCH_GET_ADDRESS</b> (<var>size_t size, int fd</var>)<var><a name="index-HOST_005fHOOKS_005fGT_005fPCH_005fGET_005fADDRESS-4897"></a></var><br>
<blockquote><!-- This host hook returns the address of some space that is likely to be -->
     <!-- free in some subsequent invocation of the compiler.  We intend to load -->
     <!-- the PCH data at this address such that the data need not be relocated. -->
     <!-- The area should be able to hold @var{size} bytes.  If the host uses -->
     <!-- @code{mmap}, @var{fd} is an open file descriptor that can be used for -->
     <!-- probing. -->
      <p>该主机钩子返回很可能在编译器的后续调用中为空闲的某块空间地址。我们打算将PCH数据加载到这个地址，从而使得不需要对数据进行重定位。该区域应该能够容纳<var>size</var>个字节。如果主机使用<code>mmap</code>，则<var>fd</var>为一个打开文件的描述符，可以用来做探测。
</p></blockquote></div>

<div class="defun">
&mdash; Host Hook: int <b>HOST_HOOKS_GT_PCH_USE_ADDRESS</b> (<var>void * address, size_t size, int fd, size_t offset</var>)<var><a name="index-HOST_005fHOOKS_005fGT_005fPCH_005fUSE_005fADDRESS-4898"></a></var><br>
<blockquote><!-- This host hook is called when a PCH file is about to be loaded. -->
     <!-- We want to load @var{size} bytes from @var{fd} at @var{offset} -->
     <!-- into memory at @var{address}.  The given address will be the result of -->
     <!-- a previous invocation of @code{HOST_HOOKS_GT_PCH_GET_ADDRESS}. -->
     <!-- Return @minus{}1 if we couldn't allocate @var{size} bytes at @var{address}. -->
     <!-- Return 0 if the memory is allocated but the data is not loaded.  Return 1 -->
     <!-- if the hook has performed everything. -->
      <p>该主机钩子会在将要加载PCH文件时被调用。我们要从<var>fd</var>中加载<var>size</var>字节到内存中<var>address</var>地址的<var>offset</var> 偏移量出。给定的<var>address</var>为之前调用<code>HOST_HOOKS_GT_PCH_GET_ADDRESS</code>所得的结果。如果不能在<var>address</var> 处分配<var>size</var>个字节，则返回&minus;1。如果分配了内存但是没有加载数据，则返回0。如果该钩子完成了所有的事情，则返回1。

     <!-- If the implementation uses reserved address space, free any reserved -->
     <!-- space beyond @var{size}, regardless of the return value.  If no PCH will -->
     <!-- be loaded, this hook may be called with @var{size} zero, in which case -->
     <!-- all reserved address space should be freed. -->
      <p>如果实现使用了保留地址空间，则会释放超出<var>size</var>的任何保留空间，而不管返回值如何。如果不加载PCH，则该钩子可以使用<var>size</var>为0的方式调用，这样所有保留地址空间将被释放。

     <!-- Do not try to handle values of @var{address} that could not have been -->
     <!-- returned by this executable; just return @minus{}1.  Such values usually -->
     <!-- indicate an out-of-date PCH file (built by some other GCC executable), -->
     <!-- and such a PCH file won't work. -->
      <p>不要试图不能被该执行程序返回的<var>address</var>值；直接返回&minus;1。这些值通常表明了一个过时的PCH文件（由其它GCC可执行程序创建的），并且该PCH文件是无法工作的。
</p></blockquote></div>

<div class="defun">
&mdash; Host Hook: size_t <b>HOST_HOOKS_GT_PCH_ALLOC_GRANULARITY</b> (<var>void</var>)<var>;<a name="index-HOST_005fHOOKS_005fGT_005fPCH_005fALLOC_005fGRANULARITY-4899"></a></var><br>
<blockquote><!-- This host hook returns the alignment required for allocating virtual -->
     <!-- memory.  Usually this is the same as getpagesize, but on some hosts the -->
     <!-- alignment for reserving memory differs from the pagesize for committing -->
     <!-- memory. -->
      <p>该主机钩子返回分配虚拟内存所需的对齐大小。通常这与getpagesize相同，但是在一些主机上，保留内存的对齐大小与供使用的内存页尺寸是不同的。
</p></blockquote></div>

<!-- @node Filesystem -->
<!-- @section Host Filesystem -->
 </body></html>

