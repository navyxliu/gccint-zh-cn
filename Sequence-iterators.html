<html lang="zh">
<head>
<title>Sequence iterators - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="GIMPLE.html#GIMPLE" title="GIMPLE">
<link rel="prev" href="GIMPLE-sequences.html#GIMPLE-sequences" title="GIMPLE sequences">
<link rel="next" href="Adding-a-new-GIMPLE-statement-code.html#Adding-a-new-GIMPLE-statement-code" title="Adding a new GIMPLE statement code">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2010 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.3版本或者之后的任何版本，对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Sequence-iterators"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Adding-a-new-GIMPLE-statement-code.html#Adding-a-new-GIMPLE-statement-code">Adding a new GIMPLE statement code</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="GIMPLE-sequences.html#GIMPLE-sequences">GIMPLE sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="GIMPLE.html#GIMPLE">GIMPLE</a>
<hr>
</div>

<h3 class="section">12.9 序列迭代器</h3>

<p><a name="index-Sequence-iterators-3050"></a>
<!-- Sequence iterators are convenience constructs for iterating -->
<!-- through statements in a sequence.  Given a sequence @code{SEQ}, here is -->
<!-- a typical use of gimple sequence iterators: -->
序列迭代器为一些便利的结构，用于在序列中迭代语句。给定序列<code>SEQ</code>，典型的对gimple序列迭代器的使用为：

<pre class="smallexample">     gimple_stmt_iterator gsi;
     
     for (gsi = gsi_start (seq); !gsi_end_p (gsi); gsi_next (&amp;gsi))
       {
         gimple g = gsi_stmt (gsi);
         /* Do something with gimple statement <code>G</code>.  */
       }
</pre>
 <!-- Backward iterations are possible: -->
 <p>也可以向后迭代：

<pre class="smallexample">             for (gsi = gsi_last (seq); !gsi_end_p (gsi); gsi_prev (&amp;gsi))
</pre>
 <!-- Forward and backward iterations on basic blocks are possible with -->
<!-- @code{gsi_start_bb} and @code{gsi_last_bb}. -->
 <p>在基本块上进行前向和后向迭代可以通过配合使用<code>gsi_start_bb</code>和<code>gsi_last_bb</code>。

<!-- In the documentation below we sometimes refer to enum -->
<!-- @code{gsi_iterator_update}.  The valid options for this enumeration are: -->
 <p>在下面的介绍中，我们有时会用到enum <code>gsi_iterator_update</code>。对于该枚举的有效操作有：

     <ul>
<li><code>GSI_NEW_STMT</code>
<!-- Only valid when a single statement is added.  Move the iterator to it. -->
只有当增加单个语句被时才有效。将迭代器移动到该处。

     <li><code>GSI_SAME_STMT</code>
<!-- Leave the iterator at the same statement. -->
将迭代器放在相同的语句处。

     <li><code>GSI_CONTINUE_LINKING</code>
<!-- Move iterator to whatever position is suitable for linking other -->
<!-- statements in the same direction. -->
将迭代器移动到在相同方向上，适合链接其它语句的位置。
</ul>

<!-- Below is a list of the functions used to manipulate and use -->
<!-- statement iterators. -->
 <p>下面为一个函数列表，用于操作和使用语句迭代器。

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_start</b> (<var>gimple_seq seq</var>)<var><a name="index-gsi_005fstart-3051"></a></var><br>
<blockquote><!-- Return a new iterator pointing to the sequence @code{SEQ}'s first -->
     <!-- statement.  If @code{SEQ} is empty, the iterator's basic block is @code{NULL}. -->
     <!-- Use @code{gsi_start_bb} instead when the iterator needs to always have -->
     <!-- the correct basic block set. -->
      <p>返回一个新的迭代器，指向序列<code>SEQ</code>的第一个语句。如果<code>SEQ</code>为空，则迭代器的基本块为<code>NULL</code>。当迭代器总是需要正确设置基本块的时候，使用<code>gsi_start_bb</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_start_bb</b> (<var>basic_block bb</var>)<var><a name="index-gsi_005fstart_005fbb-3052"></a></var><br>
<blockquote><!-- Return a new iterator pointing to the first statement in basic -->
     <!-- block @code{BB}. -->
      <p>返回一个新的迭代器，指向基本块<code>BB</code>中的第一条语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_last</b> (<var>gimple_seq seq</var>)<var><a name="index-gsi_005flast-3053"></a></var><br>
<blockquote><!-- Return a new iterator initially pointing to the last statement of -->
     <!-- sequence @code{SEQ}.  If @code{SEQ} is empty, the iterator's basic block is -->
     <!-- @code{NULL}.  Use @code{gsi_last_bb} instead when the iterator needs to always -->
     <!-- have the correct basic block set. -->
      <p>返回一个新的迭代器，初始化为指向序列<code>SEQ</code>中的最后一条语句。如果<code>SEQ</code>为空，则迭代器的基本块为<code>NULL</code>。当迭代器总是需要正确设置基本块的时候，使用<code>gsi_last_bb</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_last_bb</b> (<var>basic_block bb</var>)<var><a name="index-gsi_005flast_005fbb-3054"></a></var><br>
<blockquote><!-- Return a new iterator pointing to the last statement in basic -->
     <!-- block @code{BB}. -->
      <p>返回一个新的迭代器，指向基本块<code>BB</code>中的最后一条语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: bool <b>gsi_end_p</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fend_005fp-3055"></a></var><br>
<blockquote><!-- Return @code{TRUE} if at the end of @code{I}. -->
      <p>如果位于<code>I</code>的结尾，则返回<code>TRUE</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: bool <b>gsi_one_before_end_p</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fone_005fbefore_005fend_005fp-3056"></a></var><br>
<blockquote><!-- Return @code{TRUE} if we're one statement before the end of @code{I}. -->
      <p>如果是<code>I</code>的结尾之前的一个语句，则返回<code>TRUE</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_next</b> (<var>gimple_stmt_iterator *i</var>)<var><a name="index-gsi_005fnext-3057"></a></var><br>
<blockquote><!-- Advance the iterator to the next gimple statement. -->
      <p>将迭代器前进到下一个gimple语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_prev</b> (<var>gimple_stmt_iterator *i</var>)<var><a name="index-gsi_005fprev-3058"></a></var><br>
<blockquote><!-- Advance the iterator to the previous gimple statement. -->
      <p>将迭代器前进到前一个gimple语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple <b>gsi_stmt</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fstmt-3059"></a></var><br>
<blockquote><!-- Return the current stmt. -->
      <p>返回当前的stmt。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_after_labels</b> (<var>basic_block bb</var>)<var><a name="index-gsi_005fafter_005flabels-3060"></a></var><br>
<blockquote><!-- Return a block statement iterator that points to the first -->
     <!-- non-label statement in block @code{BB}. -->
      <p>返回一个块语句迭代器，指向块<code>BB</code>中的第一个非标号的语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple * <b>gsi_stmt_ptr</b> (<var>gimple_stmt_iterator *i</var>)<var><a name="index-gsi_005fstmt_005fptr-3061"></a></var><br>
<blockquote><!-- Return a pointer to the current stmt. -->
      <p>返回指向当前stmt的指针。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: basic_block <b>gsi_bb</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fbb-3062"></a></var><br>
<blockquote><!-- Return the basic block associated with this iterator. -->
      <p>返回与该迭代器关联的基本块。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_seq <b>gsi_seq</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fseq-3063"></a></var><br>
<blockquote><!-- Return the sequence associated with this iterator. -->
      <p>返回与该迭代器关联的序列。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_remove</b> (<var>gimple_stmt_iterator *i, bool remove_eh_info</var>)<var><a name="index-gsi_005fremove-3064"></a></var><br>
<blockquote><!-- Remove the current stmt from the sequence.  The iterator is -->
     <!-- updated to point to the next statement.  When @code{REMOVE_EH_INFO} is -->
     <!-- true we remove the statement pointed to by iterator @code{I} from the @code{EH} -->
     <!-- tables.  Otherwise we do not modify the @code{EH} tables.  Generally, -->
     <!-- @code{REMOVE_EH_INFO} should be true when the statement is going to be -->
     <!-- removed from the @code{IL} and not reinserted elsewhere. -->
      <p>从序列中移除当前stmt。迭代器被更新为指向下一条语句。当<code>REMOVE_EH_INFO</code>为真，则我们将迭代器<code>I</code>指向的语句从<code>EH</code>表中移除。否则我们不修改<code>EH</code>表。通常当语句将从<code>IL</code>中被移除，并不被插入到其它地方的时候，<code>REMOVE_EH_INFO</code>应该为真。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_link_seq_before</b> (<var>gimple_stmt_iterator *i, gimple_seq seq, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005flink_005fseq_005fbefore-3065"></a></var><br>
<blockquote><!-- Links the sequence of statements @code{SEQ} before the statement pointed -->
     <!-- by iterator @code{I}.  @code{MODE} indicates what to do with the iterator -->
     <!-- after insertion (see @code{enum gsi_iterator_update} above). -->
      <p>将语句序列<code>SEQ</code>链接在由迭代器<code>I</code>指向的语句之前。<code>MODE</code>指出了插入操作之后，迭代器要做什么（参见上面的<code>enum gsi_iterator_update</code>）。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_link_before</b> (<var>gimple_stmt_iterator *i, gimple g, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005flink_005fbefore-3066"></a></var><br>
<blockquote><!-- Links statement @code{G} before the statement pointed-to by iterator @code{I}. -->
     <!-- Updates iterator @code{I} according to @code{MODE}. -->
      <p>将语句<code>G</code>链接在由迭代器<code>I</code>指向的语句之前。根据<code>MODE</code>来更新迭代器<code>I</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_link_seq_after</b> (<var>gimple_stmt_iterator *i, gimple_seq seq, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005flink_005fseq_005fafter-3067"></a></var><br>
<blockquote><!-- Links sequence @code{SEQ} after the statement pointed-to by iterator @code{I}. -->
     <!-- @code{MODE} is as in @code{gsi_insert_after}. -->
      <p>将序列<code>SEQ</code>链接在由迭代器<code>I</code>指向的语句之后。<code>MODE</code>与在<code>gsi_insert_after</code>中的相同。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_link_after</b> (<var>gimple_stmt_iterator *i, gimple g, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005flink_005fafter-3068"></a></var><br>
<blockquote><!-- Links statement @code{G} after the statement pointed-to by iterator @code{I}. -->
     <!-- @code{MODE} is as in @code{gsi_insert_after}. -->
      <p>将语句<code>G</code>链接在由迭代器<code>I</code>指向的语句之后。<code>MODE</code>与在<code>gsi_insert_after</code>中的相同。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_seq <b>gsi_split_seq_after</b> (<var>gimple_stmt_iterator i</var>)<var><a name="index-gsi_005fsplit_005fseq_005fafter-3069"></a></var><br>
<blockquote><!-- Move all statements in the sequence after @code{I} to a new sequence. -->
     <!-- Return this new sequence. -->
      <p>将<code>I</code>之后的所有语句移送到新的序列中。返回该新的序列。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_seq <b>gsi_split_seq_before</b> (<var>gimple_stmt_iterator *i</var>)<var><a name="index-gsi_005fsplit_005fseq_005fbefore-3070"></a></var><br>
<blockquote><!-- Move all statements in the sequence before @code{I} to a new sequence. -->
     <!-- Return this new sequence. -->
      <p>将<code>I</code>之前的所有语句移送到新的序列中。返回该新的序列。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_replace</b> (<var>gimple_stmt_iterator *i, gimple stmt, bool update_eh_info</var>)<var><a name="index-gsi_005freplace-3071"></a></var><br>
<blockquote><!-- Replace the statement pointed-to by @code{I} to @code{STMT}.  If @code{UPDATE_EH_INFO} -->
     <!-- is true, the exception handling information of the original -->
     <!-- statement is moved to the new statement. -->
      <p>将由<code>I</code>指向的语句替换为<code>STMT</code>。如果<code>UPDATE_EH_INFO</code>为真，则原来语句的异常处理信息被移送到新的语句中。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_before</b> (<var>gimple_stmt_iterator *i, gimple stmt, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005finsert_005fbefore-3072"></a></var><br>
<blockquote><!-- Insert statement @code{STMT} before the statement pointed-to by iterator -->
     <!-- @code{I}, update @code{STMT}'s basic block and scan it for new operands.  @code{MODE} -->
     <!-- specifies how to update iterator @code{I} after insertion (see enum -->
     <!-- @code{gsi_iterator_update}). -->
      <p>在由迭代器<code>I</code>指向的语句之前插入语句<code>STMT</code>，更新<code>STMT</code>的基本块并扫描新的操作数。<code>MODE</code>描述了插入操作之后，如何更新迭代器<code>I</code>(参见enum <code>gsi_iterator_update</code>)。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_seq_before</b> (<var>gimple_stmt_iterator *i, gimple_seq seq, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005finsert_005fseq_005fbefore-3073"></a></var><br>
<blockquote><!-- Like @code{gsi_insert_before}, but for all the statements in @code{SEQ}. -->
      <p>类似于<code>gsi_insert_before</code>，不过是对于<code>SEQ</code>中的所有语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_after</b> (<var>gimple_stmt_iterator *i, gimple stmt, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005finsert_005fafter-3074"></a></var><br>
<blockquote><!-- Insert statement @code{STMT} after the statement pointed-to by iterator -->
     <!-- @code{I}, update @code{STMT}'s basic block and scan it for new operands.  @code{MODE} -->
     <!-- specifies how to update iterator @code{I} after insertion (see enum -->
     <!-- @code{gsi_iterator_update}). -->
      <p>在由迭代器<code>I</code>指向的语句之后插入语句<code>STMT</code>，更新<code>STMT</code>的基本块并扫描新的操作数。<code>MODE</code>描述了插入操作之后，如何更新迭代器<code>I</code>(参见enum <code>gsi_iterator_update</code>)。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_seq_after</b> (<var>gimple_stmt_iterator *i, gimple_seq seq, enum gsi_iterator_update mode</var>)<var><a name="index-gsi_005finsert_005fseq_005fafter-3075"></a></var><br>
<blockquote><!-- Like @code{gsi_insert_after}, but for all the statements in @code{SEQ}. -->
      <p>类似于<code>gsi_insert_after</code>，不过是对于<code>SEQ</code>中的所有语句。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: gimple_stmt_iterator <b>gsi_for_stmt</b> (<var>gimple stmt</var>)<var><a name="index-gsi_005ffor_005fstmt-3076"></a></var><br>
<blockquote><!-- Finds iterator for @code{STMT}. -->
      <p>查找<code>STMT</code>的迭代器。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_move_after</b> (<var>gimple_stmt_iterator *from, gimple_stmt_iterator *to</var>)<var><a name="index-gsi_005fmove_005fafter-3077"></a></var><br>
<blockquote><!-- Move the statement at @code{FROM} so it comes right after the statement -->
     <!-- at @code{TO}. -->
      <p>将语句移送到<code>FROM</code>处，使得其正好位于<code>TO</code>处的语句之后。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_move_before</b> (<var>gimple_stmt_iterator *from, gimple_stmt_iterator *to</var>)<var><a name="index-gsi_005fmove_005fbefore-3078"></a></var><br>
<blockquote><!-- Move the statement at @code{FROM} so it comes right before the statement -->
     <!-- at @code{TO}. -->
      <p>将语句移送到<code>FROM</code>处，使得其正好位于<code>TO</code>处的语句之前。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_move_to_bb_end</b> (<var>gimple_stmt_iterator *from, basic_block bb</var>)<var><a name="index-gsi_005fmove_005fto_005fbb_005fend-3079"></a></var><br>
<blockquote><!-- Move the statement at @code{FROM} to the end of basic block @code{BB}. -->
      <p>将<code>FROM</code>处的语句移送到基本块<code>BB</code>的结尾。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_on_edge</b> (<var>edge e, gimple stmt</var>)<var><a name="index-gsi_005finsert_005fon_005fedge-3080"></a></var><br>
<blockquote><!-- Add @code{STMT} to the pending list of edge @code{E}.  No actual insertion is -->
     <!-- made until a call to @code{gsi_commit_edge_inserts}() is made. -->
      <p>将<code>STMT</code>增加到边<code>E</code>的待定列表中。直到调用<code>gsi_commit_edge_inserts</code>()之前，不会进行实际的插入操作。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_insert_seq_on_edge</b> (<var>edge e, gimple_seq seq</var>)<var><a name="index-gsi_005finsert_005fseq_005fon_005fedge-3081"></a></var><br>
<blockquote><!-- Add the sequence of statements in @code{SEQ} to the pending list of edge -->
     <!-- @code{E}.  No actual insertion is made until a call to -->
     <!-- @code{gsi_commit_edge_inserts}() is made. -->
      <p>将<code>SEQ</code>中语句序列增加到边<code>E</code>的待定列表中。直到调用<code>gsi_commit_edge_inserts</code>()之前，不会进行实际的插入操作。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: basic_block <b>gsi_insert_on_edge_immediate</b> (<var>edge e, gimple stmt</var>)<var><a name="index-gsi_005finsert_005fon_005fedge_005fimmediate-3082"></a></var><br>
<blockquote><!-- Similar to @code{gsi_insert_on_edge}+@code{gsi_commit_edge_inserts}.  If a new -->
     <!-- block has to be created, it is returned. -->
      <p>类似于<code>gsi_insert_on_edge</code>+<code>gsi_commit_edge_inserts</code>。如果需要创建一个新的块，则将其返回。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_commit_one_edge_insert</b> (<var>edge e, basic_block *new_bb</var>)<var><a name="index-gsi_005fcommit_005fone_005fedge_005finsert-3083"></a></var><br>
<blockquote><!-- Commit insertions pending at edge @code{E}.  If a new block is created, -->
     <!-- set @code{NEW_BB} to this block, otherwise set it to @code{NULL}. -->
      <p>提交在边<code>E</code>上进行的插入操作。如果创建了新的基本块，则将<code>NEW_BB</code>设置为该块，否则将其设置为<code>NULL</code>。
</p></blockquote></div>

<div class="defun">
&mdash; GIMPLE function: void <b>gsi_commit_edge_inserts</b> (<var>void</var>)<var><a name="index-gsi_005fcommit_005fedge_005finserts-3084"></a></var><br>
<blockquote><!-- This routine will commit all pending edge insertions, creating -->
     <!-- any new basic blocks which are necessary. -->
      <p>该函数将提交所有要进行的边插入操作，并在需要的时候创建新的基本块。
</p></blockquote></div>

<!-- @node Adding a new GIMPLE statement code -->
<!-- @section Adding a new GIMPLE statement code -->
 </body></html>

