<html lang="en">
<head>
<title>Overview - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Machine-Desc.html#Machine-Desc" title="Machine Desc">
<link rel="next" href="Patterns.html#Patterns" title="Patterns">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Funding Free Software'', the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Overview"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Patterns.html#Patterns">Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Machine-Desc.html#Machine-Desc">Machine Desc</a>
<hr>
</div>

<h3 class="section">16.1 Overview of How the Machine Description is Used</h3>

<p>编译器中有三个主要的转换：

     <ol type=1 start=1>

     <li>前端读取源代码并建立解析树。

     <li>基于命名的指令模式，解析树被用来生成RTL insn列表。

     <li>insn列表被用来匹配RTL模板，产生汇编代码。

      </ol>

 <p>生成过程，只与insn的名字有关系，包括命名的 <code>define_insn</code> 或者
<code>define_expand</code>。编译器会选择恰当名字的模式，并且根据这章后面的文档来使用
操作数，而不需要关心RTL模板或者操作数约束。注意，编译器所寻找的名字是被硬编码
进编译器中的——它将忽略未命名的模式和名字无法识别的模式，但是，如果你没有提供所
需要的命名模式，它将异常中断（abort）。

 <p>如果使用了 <code>define_insn</code> ，所给出的模版将会被插入到insn列表中。如果使用了
<code>define_expand</code> ，将会发生三种情况之一，取决于条件逻辑。条件逻辑可以手动为
insn列表创建一个新的insn，并且调用 <code>DONE</code>。对于某些命名模式，它可以调用
 <code>FAIL</code> 来告诉编译器使用一种备用方式完成任务。如果既没有调用DONE也没有调用
 <code>FAIL</code>，在模式中所给出的模版将会被插入，就像 <code>define_insn</code>一样。

 <p>一旦生成insn列表，各种优化过程便在insn列表中转换，替代和重排insn。例如，
<code>define_split</code> 和 <code>define_peephole</code> 模式便在这里被使用。

 <p>最后，insn列表的RTL被用来匹配 <code>define_insn</code> 模式中的RTL模版，并且那些模式
被用来生成最终的汇编代码。这时，由于不需要关心名字，所以每个命名的
<code>define_insn</code>跟没有命名没有区别。

 </body></html>

