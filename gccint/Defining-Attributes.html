<html lang="en">
<head>
<title>Defining Attributes - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Insn-Attributes.html#Insn-Attributes" title="Insn Attributes">
<link rel="next" href="Expressions.html#Expressions" title="Expressions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Funding Free Software'', the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Defining-Attributes"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Expressions.html#Expressions">Expressions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Insn-Attributes.html#Insn-Attributes">Insn Attributes</a>
<hr>
</div>

<h4 class="subsection">16.19.1 Defining Attributes and their Values</h4>

<p><a name="index-defining-attributes-and-their-values-3570"></a><a name="index-attributes_002c-defining-3571"></a>
<a name="index-define_005fattr-3572"></a>表达式 <code>define_attr</code> 用于定义目标机所需要的每个属性。其形式为：

<pre class="smallexample">     (define_attr <var>name</var> <var>list-of-values</var> <var>default</var>)
</pre>
 <p><var>name</var> 为一个字符串，指定了被定义的属性名。

 <p><var>list-of-values</var> 或者为一个字符串，指定了可以赋予属性的逗号分隔
的值的列表，或者为一个空字符串，表示属性接受一个数字值。

 <p><var>default</var> 为一个属性表达式，给出了匹配指令模式，但指令模式定义中
没有显式包含该属性值的insns，所应具有的属性值。关于更多处理缺省值的
信息，See <a href="Attr-Example.html#Attr-Example">Attr Example</a>。关于不依赖于任何特定insn的属性，
See <a href="Constant-Attributes.html#Constant-Attributes">Constant Attributes</a>。

 <p><a name="index-insn_002dattr_002eh-3573"></a>对于每个定义的属性，都有许多定义被写入 <samp><span class="file">insn-attr.h</span></samp> 文件。对于
显式指定了属性取值集合的情况，下列将被定义：

     <ul>
<li>一个针对符号 &lsquo;<samp><span class="samp">HAVE_ATTR_</span><var>name</var></samp>&rsquo; 的 &lsquo;<samp><span class="samp">#define</span></samp>&rsquo; 被写入。

     <li>一个枚举类别被定义，元素的形式为 &lsquo;<samp><var>upper-name</var><span class="samp">_</span><var>upper-value</var></samp>&rsquo;，
其中属性名和值首先被转换为大写的。

     <li>一个函数 &lsquo;<samp><span class="samp">get_attr_</span><var>name</var></samp>&rsquo; 被定义，其传入一个insn并返回该insn
的属性值。
</ul>

 <p>例如，如果在 <samp><span class="file">md</span></samp> 文件中存在下列定义：

<pre class="smallexample">     (define_attr "type" "branch,fp,load,store,arith" ...)
</pre>
 <p class="noindent">则下面的行将被写入文件 <samp><span class="file">insn-attr.h</span></samp> 中。

<pre class="smallexample">     #define HAVE_ATTR_type
     enum attr_type {TYPE_BRANCH, TYPE_FP, TYPE_LOAD,
                      TYPE_STORE, TYPE_ARITH};
     extern enum attr_type get_attr_type ();
</pre>
 <p>如果属性接受数字值，则不会定义 <code>enum</code> 类型，并且获得属性值的函数将
返回 <code>int</code>。

 <p>There are attributes which are tied to a specific meaning.  These
attributes are not free to use for other purposes:

     <dl>
<dt><code>length</code><dd>The <code>length</code> attribute is used to calculate the length of emitted
code chunks.  This is especially important when verifying branch
distances. See <a href="Insn-Lengths.html#Insn-Lengths">Insn Lengths</a>.

     <br><dt><code>enabled</code><dd>The <code>enabled</code> attribute can be defined to prevent certain
alternatives of an insn definition from being used during code
generation. See <a href="Disable-Insn-Alternatives.html#Disable-Insn-Alternatives">Disable Insn Alternatives</a>.

 </dl>

 </body></html>

