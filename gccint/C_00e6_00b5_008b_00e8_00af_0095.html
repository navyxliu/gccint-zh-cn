<html lang="zh">
<head>
<title>C测试 - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="_00e6_00b5_008b_00e8_00af_0095_00e5_008c_0085.html#g_t_00e6_00b5_008b_00e8_00af_0095_00e5_008c_0085" title="测试包">
<link rel="prev" href="Ada_00e6_00b5_008b_00e8_00af_0095.html#Ada_00e6_00b5_008b_00e8_00af_0095" title="Ada测试">
<link rel="next" href="libgcj_00e6_00b5_008b_00e8_00af_0095.html#libgcj_00e6_00b5_008b_00e8_00af_0095" title="libgcj测试">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.2版本或者之后的任何版本，
对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文
字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在
标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行
     的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="C%e6%b5%8b%e8%af%95"></a>
<a name="C_00e6_00b5_008b_00e8_00af_0095"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="libgcj_00e6_00b5_008b_00e8_00af_0095.html#libgcj_00e6_00b5_008b_00e8_00af_0095">libgcj测试</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Ada_00e6_00b5_008b_00e8_00af_0095.html#Ada_00e6_00b5_008b_00e8_00af_0095">Ada测试</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="_00e6_00b5_008b_00e8_00af_0095_00e5_008c_0085.html#g_t_00e6_00b5_008b_00e8_00af_0095_00e5_008c_0085">测试包</a>
<hr>
</div>

<h4 class="subsection">6.4.4 C语言测试包</h4>

<p>GCC在<samp><span class="file">gcc/testsuite</span></samp>目录下包含下列C语言测试包：

     <dl>
<dt><samp><span class="file">gcc.dg</span></samp><dd>其包含了C编译器特定特征的测试，使用了较为现代的&lsquo;<samp><span class="samp">dg</span></samp>&rsquo; harness。
如果可能的话，对各种编译器特征的正确性的测试应该放在这里。

     <p>魔术注释（Magic comments）决定了文件是否被预处理，编译，连接或运行。
在这些测试中，错误和警告消息文本用来跟在注释中给出的预期文本或正规表达式作比较。
这些测试使用选项&lsquo;<samp><span class="samp">-ansi -pedantic</span></samp>&rsquo;来运行，除非给出了其它选项。
除了下面标注的以外，它们使用多个优化选项来运行。
<br><dt><samp><span class="file">gcc.dg/compat</span></samp><dd>该子目录包含了使用<samp><span class="file">compat.exp</span></samp>的二进制兼容性测试，
并且是使用语言无关的支持（参见<a href="compat_00e6_00b5_008b_00e8_00af_0095.html#compat_00e6_00b5_008b_00e8_00af_0095">对测试二进制兼容性的支持</a>）。
<br><dt><samp><span class="file">gcc.dg/cpp</span></samp><dd>该子目录包含了预处理器的测试。
<br><dt><samp><span class="file">gcc.dg/debug</span></samp><dd>该子目录包含了调试格式的测试。该子目录下的测试用于编译器支持的每个调试格式。
<br><dt><samp><span class="file">gcc.dg/format</span></samp><dd>该子目录包含了<samp><span class="option">-Wformat</span></samp>格式检测的测试。
该目录下的测试分别使用和不使用<samp><span class="option">-DWIDE</span></samp>来运行。
<br><dt><samp><span class="file">gcc.dg/noncompile</span></samp><dd>该子目录包含了不被编译并且不需要任何特定编译选项的测试。
它们使用多个优化选项来运行，因为有时编译器的优化会使得代码崩溃。
<br><dt><samp><span class="file">gcc.dg/special</span></samp><dd>FIXME: 对其进行描述。
<br><dt><samp><span class="file">gcc.c-torture</span></samp><dd>这包含了历史上很容易出问题的特定代码片断。这些测试使用多个优化选项来运行，
所以测试只在某些优化级别出问题的特征也属于这里。
这还包含了检测特定优化发生的测试。
或许值得去将正确性测试从代码质量测试中完全分开出来，但目前还没有做。
<br><dt><samp><span class="file">gcc.c-torture/compat</span></samp><dd>FIXME: 对其进行描述。

     <p>该目录应该不会被用于新的测试。
<br><dt><samp><span class="file">gcc.c-torture/compile</span></samp><dd>该测试包包含了应该编译，但不需要连接和运行的测试用例。
这些测试用例使用多个不同优化选项组合来编译。所有的警告都被禁止，
所以如果你想测试编译器警告是否存在，则这个目录不适合。虽然可以设置特定的选项，
并且测试不是用于特定的平台，但大多数这些测试用例不应该包含平台依赖。
FIXME：论述如何使用像<code>NO_LABEL_VALUES</code>和<code>STACK_SIZE</code>这样的定义。
<br><dt><samp><span class="file">gcc.c-torture/execute</span></samp><dd>该测试包包含了应该被编译，连接和运行的测试用例；
否则跟<samp><span class="file">gcc.c-torture/compile</span></samp>相同的注释将会使用。
<br><dt><samp><span class="file">gcc.c-torture/execute/ieee</span></samp><dd>这包含了IEEE浮点特定的测试。
<br><dt><samp><span class="file">gcc.c-torture/unsorted</span></samp><dd>FIXME: 对其进行描述。

     <p>该目录应该不会被用于新的测试。
<br><dt><samp><span class="file">gcc.c-torture/misc-tests</span></samp><dd>该目录包含了需要特殊处理的C测试。其中的一些测试具有单独的expect文件，
另一些则共享特殊用途的expect文件：

          <dl>
<dt><samp><code>bprob*.c</code></samp><dd>使用<samp><span class="file">bprob.exp</span></samp>来测试<samp><span class="option">-fbranch-probabilities</span></samp>，并且是使用通用的，
语言无关的框架（参见<a href="profopt_00e6_00b5_008b_00e8_00af_0095.html#profopt_00e6_00b5_008b_00e8_00af_0095">对测试profile指导的优化的支持</a>）。

          <br><dt><samp><code>dg-*.c</code></samp><dd>使用<samp><span class="file">dg-test.exp</span></samp>来测试测试包本身。

          <br><dt><samp><code>gcov*.c</code></samp><dd>使用<samp><span class="file">gcov.exp</span></samp>来测试<samp><span class="command">gcov</span></samp>输出，
并且是使用语言无关的支持（参见<a href="gcov_00e6_00b5_008b_00e8_00af_0095.html#gcov_00e6_00b5_008b_00e8_00af_0095">对测试gcov的支持</a>）。

          <br><dt><samp><code>i386-pf-*.c</code></samp><dd>使用<samp><span class="file">i386-prefetch.exp</span></samp>来测试i386特定的对数据预提取的支持。
</dl>
     </dl>

 <p>FIXME: 合并到<samp><span class="file">testsuite/readme.gcc</span></samp>中，
并进一步论述测试用例的格式和魔术注释。

 </body></html>

