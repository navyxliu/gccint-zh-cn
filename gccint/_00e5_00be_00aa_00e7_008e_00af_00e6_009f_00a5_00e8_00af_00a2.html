<html lang="zh">
<head>
<title>循环查询 - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="_00e5_00be_00aa_00e7_008e_00af_00e5_0088_0086_00e6_009e_0090_00e5_0092_008c_00e8_00a1_00a8_00e7_00a4_00ba.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e5_0088_0086_00e6_009e_0090_00e5_0092_008c_00e8_00a1_00a8_00e7_00a4_00ba" title="循环分析和表示">
<link rel="prev" href="_00e5_00be_00aa_00e7_008e_00af_00e8_00a1_00a8_00e7_00a4_00ba.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e8_00a1_00a8_00e7_00a4_00ba" title="循环表示">
<link rel="next" href="_00e5_00be_00aa_00e7_008e_00af_00e6_0093_008d_00e4_00bd_009c.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e6_0093_008d_00e4_00bd_009c" title="循环操作">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.2版本或者之后的任何版本，
对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文
字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在
标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行
     的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="%e5%be%aa%e7%8e%af%e6%9f%a5%e8%af%a2"></a>
<a name="g_t_00e5_00be_00aa_00e7_008e_00af_00e6_009f_00a5_00e8_00af_00a2"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="_00e5_00be_00aa_00e7_008e_00af_00e6_0093_008d_00e4_00bd_009c.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e6_0093_008d_00e4_00bd_009c">循环操作</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="_00e5_00be_00aa_00e7_008e_00af_00e8_00a1_00a8_00e7_00a4_00ba.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e8_00a1_00a8_00e7_00a4_00ba">循环表示</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="_00e5_00be_00aa_00e7_008e_00af_00e5_0088_0086_00e6_009e_0090_00e5_0092_008c_00e8_00a1_00a8_00e7_00a4_00ba.html#g_t_00e5_00be_00aa_00e7_008e_00af_00e5_0088_0086_00e6_009e_0090_00e5_0092_008c_00e8_00a1_00a8_00e7_00a4_00ba">循环分析和表示</a>
<hr>
</div>

<h3 class="section">14.2 循环查询</h3>

<p><a name="index-Loop-querying-3074"></a>
查询循环信息的函数声明在<samp><span class="file">cfgloop.h</span></samp>中。一些信息可以直接从结构体中获得。
每个基本块的<code>loop_father</code>域都包含了它所属的最内层的循环。
最有用的（总是保持更新的）循环结构有：

     <ul>
<li><code>header</code>, <code>latch</code>: 循环的Header和latch基本块。
<li><code>num_nodes</code>: 循环中的基本块数目（包括子循环的基本块）。
<li><code>depth</code>: 该循环在循环树中的深度，也就是，外层循环的数目。
<li><code>outer</code>, <code>inner</code>, <code>next</code>: 外部循环，第一个子循环，以及循环树中的下一个循环。
</ul>

 <p>在循环结构体中还有其它一些域，它们有许多是只被一些过程使用，
或者在改变CFG时并没有被更新；总之，它们应该不要去直接访问。

 <p>用来查询循环结构体的最重要的函数有：

     <ul>
<li><code>flow_loops_dump</code>: 将循环的信息转储到文件中。
<li><code>verify_loop_structure</code>: 检查循环结构体的一致性。
<li><code>loop_latch_edge</code>: 返回循环的latch边。
<li><code>loop_preheader_edge</code>:
如果循环有preheaders, 则返回循环的preheader边。
<li><code>flow_loop_nested_p</code>: 测试循环是否为另一个循环的子循环。
<li><code>flow_bb_inside_loop_p</code>:
测试基本块是否属于一个循环（包括它的子循环）。
<li><code>find_common_loop</code>: 找到两个循环的公共外循环。
<li><code>superloop_at_depth</code>: 返回给定深度的外循环。
<li><code>tree_num_loop_insns</code>, <code>num_loop_insns</code>:
分别在GIMPLE和RTL之上，评估循环中的insn数目。
<li><code>loop_exit_edge_p</code>: 测试是否为循环的出口边。
<li><code>mark_loop_exit_edges</code>:
使用<code>EDGE_LOOP_EXIT</code>来标记所有循环的出口边。
<li><code>get_loop_body</code>, <code>get_loop_body_in_dom_order</code>,
<code>get_loop_body_in_bfs_order</code>:
分别为，在反向的CFG中使用深度优先顺序，dominance顺序，以及宽度优先顺序，
来列举基本块。
<li><code>single_exit</code>:
或者返回循环的单一出口边，或者当循环具有多个出口时返回<code>NULL</code>。
只有在使用了LOOPS_HAVE_MARKED_SINGLE_EXITS属性时，才能使用这个函数。
<li><code>get_loop_exit_edges</code>: 列举循环的出口边。
<li><code>just_once_each_iteration_p</code>:
如果基本块在循环的每次迭代中都只被执行一次，返回true
（也就是，其不属于一个子循环，并且dominate循环的latch）。
</ul>

 </body></html>

