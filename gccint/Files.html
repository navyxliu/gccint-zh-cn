<html lang="en">
<head>
<title>Files - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Type-Information.html#Type-Information" title="Type Information">
<link rel="prev" href="GGC-Roots.html#GGC-Roots" title="GGC Roots">
<link rel="next" href="Invoking-the-garbage-collector.html#Invoking-the-garbage-collector" title="Invoking the garbage collector">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Funding Free Software'', the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Files"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Invoking-the-garbage-collector.html#Invoking-the-garbage-collector">Invoking the garbage collector</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="GGC-Roots.html#GGC-Roots">GGC Roots</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Type-Information.html#Type-Information">Type Information</a>
<hr>
</div>

<h3 class="section">22.3 Source Files Containing Type Information</h3>

<p><a name="index-generated-files-4800"></a><a name="index-files_002c-generated-4801"></a>
只要向之前没有 <code>GTY</code> 标记的源文件里添加 <code>GTY</code> 标记，或者
创建一个新的包含 <code>GTY</code> 标记的源文件，那么就有三件事情需要做：

     <ol type=1 start=1>
<li>需要将文件添加到类型机构需要扫描的源文件列表中。有四种情况：

          <ol type=a start=1>
<li>对于一个后端文件，通常会自动完成。如果没有，则需要将其添加到
<samp><span class="file">config.gcc</span></samp> 里的适当port条目 <code>target_gtfiles</code> 中。

          <li>对于所用前端共享的文件，将文件名添加到 <samp><span class="file">Makefile.in</span></samp> 里的
<code>GTFILES</code> 变量中。

          <li>对于一个前端的文件，将文件名添加到在适当 <samp><span class="file">config-lang.in</span></samp>
里定义的 <code>gtfiles</code> 变量中。对于C，文件为 <samp><span class="file">c-config-lang.in</span></samp>。

          <li>对于一些而不是所有的前端的文件，将文件名添加到 <em>所有</em> 使用
它的前端的 <code>gtfiles</code> 变量中。
          </ol>

     <li>如果是头文件，则需要检查是否被包含在正确的位置，使得对于生成文件
为可见的。对于一个后端文件，这应该是自动完成的。对于前端的头文件，
应该被包含 <samp><span class="file">gtype-</span><var>lang</var><span class="file">.h</span></samp> 的同一文件所包含。对于其它头
文件，需要被包含在 <samp><span class="file">gtype-desc.c</span></samp> 中。<samp><span class="file">gtype-desc.c</span></samp> 为
生成文件，所以需要将头文件名添加到 <samp><span class="file">gengtype.c</span></samp> 里的
<code>open_base_file</code> 里的 <code>ifiles</code> 中。

     <p>对于不是头文件的源文件，类型机构将会生成一个头文件，并且该头文件
应该被包含在所修改的源文件中。文件名为 <samp><span class="file">gt-</span><var>path</var><span class="file">.h</span></samp>，其
中 <var>path</var> 是相对于 <samp><span class="file">gcc</span></samp> 目录的路径名，并且由 <tt>-</tt>
来替换斜线。例如，要被包含在 <samp><span class="file">cp/parser.c</span></samp> 中的头文件命名为
<samp><span class="file">gt-cp-parser.c</span></samp>。生成的头文件应该被包含在源文件所有其它内容
之后。不要忘记将该文件在 <samp><span class="file">Makefile</span></samp> 中作为一个依赖条件！

      </ol>

 <p>对于语言前端，还有另一个文件需要在某处被包含。其为
<samp><span class="file">gtype-</span><var>lang</var><span class="file">.h</span></samp>，其中 <var>lang</var> 是语言子目录的名字。

 </body></html>

