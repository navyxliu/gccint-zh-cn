<html lang="zh">
<head>
<title>Tree概述 - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Trees.html#Trees" title="Trees">
<link rel="prev" href="_00e4_00b8_008d_00e8_00b6_00b3_00e4_00b9_008b_00e5_00a4_0084.html#g_t_00e4_00b8_008d_00e8_00b6_00b3_00e4_00b9_008b_00e5_00a4_0084" title="不足之处">
<link rel="next" href="_00e7_00b1_00bb_00e5_009e_008b.html#g_t_00e7_00b1_00bb_00e5_009e_008b" title="类型">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.2版本或者之后的任何版本，
对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文
字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在
标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行
     的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Tree%e6%a6%82%e8%bf%b0"></a>
<a name="Tree_00e6_00a6_0082_00e8_00bf_00b0"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="_00e7_00b1_00bb_00e5_009e_008b.html#g_t_00e7_00b1_00bb_00e5_009e_008b">类型</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="_00e4_00b8_008d_00e8_00b6_00b3_00e4_00b9_008b_00e5_00a4_0084.html#g_t_00e4_00b8_008d_00e8_00b6_00b3_00e4_00b9_008b_00e5_00a4_0084">不足之处</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Trees.html#Trees">Trees</a>
<hr>
</div>

<h3 class="section">9.2 概述</h3>

<p><a name="index-tree-1691"></a><a name="index-TREE_005fCODE-1692"></a>
内部表示使用的主要数据结构体为<code>tree</code>。
这些节点，即所有C类型的<code>tree</code>，有许多种类。
<code>tree</code>是一个指针类型，但是它所指向的对象可能会有不同的类型。
从现在开始，除非是在谈论实际的C类型<code>tree</code>，
我们提到的树都是指普通类型的。

 <p>可以通过<code>TREE_CODE</code>宏来得知特定的树是什么类型的节点。
许多宏以树作为输入，并以树作为输出返回。
然而，大多数宏需要特定的一种树节点作为输入。
换句话说，是有一个树的类型系统，但没有反应在C的类型系统中。

 <p>出于安全考虑，使用<samp><span class="option">--enable-checking</span></samp>来配置GCC会很有用。
虽然这会导致显著的性能亏损（因为所有tree类型都会在运行时被检查），
并且因此在发行版中不合适，但在开发阶段会非常有帮助。

 <p>许多宏作为判定条件使用。许多并不是所有的这些判定条件都结束于&lsquo;<samp><span class="samp">_P</span></samp>&rsquo;。
不要依赖于这些宏的结果类型会是特定的类型。
但是，你可以依赖于类型可以与<code>0</code>相比较，这个事实。所以，像这样的语句

<pre class="smallexample">     if (TEST_P (t) &amp;&amp; !TEST_P (y))
       x = 1;
</pre>
 <p class="noindent">和
<pre class="smallexample">     int i = (TEST_P (t) != 0);
</pre>
 <p class="noindent">是合法的。现在返回<code>int</code>值的宏，将来可能被改为返回<code>tree</code>值，
或者其它指针。即使那些继续返回<code>int</code>的，也可能会由先前只返回0和1，
改为返回多个非0的代码。因此，不要将代码写成

<pre class="smallexample">     if (TEST_P (t) == 1)
</pre>
 <p class="noindent">因为这样的代码不保证将来会正确工作。

 <p>不要使用这里描述的宏或者函数的返回值的地址。
特别是，不保证这些值是左值。

 <p>一般来说，宏的名字都是大写形式，而函数的名字都是完全小写的。
很少有例外的。
你应该假设任何完全由大写字母组成的宏或函数可能会对它的参数进行多次求值。
你可以假设完全由小写字母组成的宏或函数将会对它的参数只求一次值。

 <p><code>error_mark_node</code>是一个特殊的树。它的树代码为<code>ERROR_MARK</code>，
但由于只有一个节点具有那个代码，
所以通常的做法是将树与<code>error_mark_node</code>进行比较。
（该测试只是一个指针相等的测试。）如果在前端处理中，有一个错误发生，
则标识<code>errorcount</code>将会被设置。如果前端遇到无法处理的代码，
则会给用户发送一个消息，并设置<code>sorrycount</code>。当这些标识被设置时，
则通常返回特定类型树的宏和函数，可能会替代的返回<code>error_mark_node</code>。
因此，如果你打算进行任何错误代码处理，
则必须准备好跟<code>error_mark_node</code>打交道。

 <p>有时，一个特定的树插槽slot（就像表达式的操作数，或声明里的特定域）
将被称为“为后端保留”。这些插槽用于存储RTL，当树被转换为RTL，被GCC后端使用时。
然而，如果没有进行那种处理（例如，如果前端被钩子转向给一个智能编辑器），
那么这些插槽就可以被使用了。

 <p>如果你遇到的情况不符合这个文档，如没有在这里提到的树节点的类型，
或记载的宏返回了不同的某一类型实体，那么你发现了一个bug ，要么是前端的，
要么是该文档的。请报告这些bug，以及是否有任何其他的bug。

<ul class="menu">
<li><a accesskey="1" href="_00e5_00ae_008f_00e5_0092_008c_00e5_0087_00bd_00e6_0095_00b0.html#g_t_00e5_00ae_008f_00e5_0092_008c_00e5_0087_00bd_00e6_0095_00b0">宏和函数</a>:       可以用于所有树的宏和函数。
<li><a accesskey="2" href="_00e6_00a0_0087_00e8_00af_0086_00e7_00ac_00a6.html#g_t_00e6_00a0_0087_00e8_00af_0086_00e7_00ac_00a6">标识符</a>:         事物的名字。
<li><a accesskey="3" href="_00e5_00ae_00b9_00e5_0099_00a8.html#g_t_00e5_00ae_00b9_00e5_0099_00a8">容器</a>:           列表和向量。
</ul>

<!--  -->
<!-- Trees -->
<!--  -->
 </body></html>

