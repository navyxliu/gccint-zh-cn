<html lang="en">
<head>
<title>Defining Mode Iterators - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Mode-Iterators.html#Mode-Iterators" title="Mode Iterators">
<link rel="next" href="Substitutions.html#Substitutions" title="Substitutions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Funding Free Software'', the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Defining-Mode-Iterators"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Substitutions.html#Substitutions">Substitutions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Mode-Iterators.html#Mode-Iterators">Mode Iterators</a>
<hr>
</div>

<h5 class="subsubsection">16.22.1.1 Defining Mode Iterators</h5>

<p><a name="index-define_005fmode_005fiterator-3673"></a>
定义一个机器模式迭代器的语法为：

<pre class="smallexample">     (define_mode_iterator <var>name</var> [(<var>mode1</var> "<var>cond1</var>") ... (<var>moden</var> "<var>condn</var>")])
</pre>
 <p>这将允许后续的 <samp><span class="file">.md</span></samp> 文件结构可以使用机器模式suffix
<code>:</code><var>name</var>。每个这样的结构将被扩展 <var>n</var> 次，一次使用
<code>:</code><var>mode1</var> 来替换，一次使用 <code>:</code><var>mode2</var> 来替换，等等。
在扩展 <var>modei</var> 时，每个C条件 <var>condi</var> 还要为真。

 <p>例如：

<pre class="smallexample">     (define_mode_iterator P [(SI "Pmode == SImode") (DI "Pmode == DImode")])
</pre>
 <p>定义了一个新的机器模式后缀 <code>:P</code>。每个使用 <code>:P</code> 的结构将被扩展
两次，一次由 <code>:SI</code> 来替换 <code>:P</code>，一次由 <code>:DI</code> 来替换
<code>:P</code>。其中 <code>:SI</code> 版本的只有当 <code>Pmode == SImode</code> 时才被应
用，<code>:DI</code> 版本的只有当 <code>Pmode == DImode</code> 时才被应用。

 <p>就像其它 <samp><span class="file">.md</span></samp> 条件，一个空字符串被当作“总为真”。<code>(</code><var>mode</var><code> "")</code>
也可以被缩写为 <var>mode</var>。例如：

<pre class="smallexample">     (define_mode_iterator GPR [SI (DI "TARGET_64BIT")])
</pre>
 <p>意味着 <code>:DI</code> 扩展只有为 <code>TARGET_64BIT</code> 时被应用，但 <code>:SI</code>
扩展却没有这样的限制。

 <p>迭代器按照它们定义的顺序被应用。这在当两个迭代器用于一个结构中需要替换时
会变的很重要。See <a href="Substitutions.html#Substitutions">Substitutions</a>。

 </body></html>

