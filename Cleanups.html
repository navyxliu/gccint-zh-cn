<html lang="zh">
<head>
<title>Cleanups - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Statements.html#Statements" title="Statements">
<link rel="prev" href="Jumps.html#Jumps" title="Jumps">
<link rel="next" href="OpenMP.html#OpenMP" title="OpenMP">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2010 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.3版本或者之后的任何版本，对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Cleanups"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="OpenMP.html#OpenMP">OpenMP</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Jumps.html#Jumps">Jumps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Statements.html#Statements">Statements</a>
<hr>
</div>

<h4 class="subsection">11.7.6 清除</h4>

<p><a name="index-Cleanups-2533"></a>
<!-- Destructors for local C++ objects and similar dynamic cleanups are -->
<!-- represented in GIMPLE by a @code{TRY_FINALLY_EXPR}. -->
<!-- @code{TRY_FINALLY_EXPR} has two operands, both of which are a sequence -->
<!-- of statements to execute.  The first sequence is executed.  When it -->
<!-- completes the second sequence is executed. -->
对于C++局部对象的析构，以及类似的动态清除操作在GIMPLE中通过一个<code>TRY_FINALLY_EXPR</code>来表示。<code>TRY_FINALLY_EXPR</code>有两个操作数，均为要执行的语句序列。第一个序列会被执行。当其执行完毕时，第二个序列会被执行。

<!-- The first sequence may complete in the following ways: -->
 <p>第一个序列可以按照下列方式来执行完毕：

     <ol type=1 start=1>
<!-- @item Execute the last statement in the sequence and fall off the -->
<!-- end. -->
<li>执行了序列中的最后一条语句，并结束。
<!-- @item Execute a goto statement (@code{GOTO_EXPR}) to an ordinary -->
<!-- label outside the sequence. -->
<li>执行一个goto语句(<code>GOTO_EXPR</code>)，跳到序列之外的一个普通标号。 t
<!-- @item Execute a return statement (@code{RETURN_EXPR}). -->
<li>执行一个return语句(<code>RETURN_EXPR</code>)。
<!-- @item Throw an exception.  This is currently not explicitly represented in -->
<!-- GIMPLE. -->
<li>抛出一个异常。这在当前没有用GIMPLE显式的表示。
      </ol>

<!-- The second sequence is not executed if the first sequence completes by -->
<!-- calling @code{setjmp} or @code{exit} or any other function that does -->
<!-- not return.  The second sequence is also not executed if the first -->
<!-- sequence completes via a non-local goto or a computed goto (in general -->
<!-- the compiler does not know whether such a goto statement exits the -->
<!-- first sequence or not, so we assume that it doesn't). -->
 <p>如果第一个序列通过调用<code>setjmp</code>或<code>exit</code>，或者其它不返回的函数，来执行完毕，则第二个序列不会被执行。如果第一个序列通过一个非局部goto或者一个计算goto（总的来说，编译器不知道这样一个goto语句是否会退出第一个序列，所以我们假设其没有退出）来执行完毕，则第二个序列也不会被执行。

<!-- After the second sequence is executed, if it completes normally by -->
<!-- falling off the end, execution continues wherever the first sequence -->
<!-- would have continued, by falling off the end, or doing a goto, etc. -->
 <p>第二个序列被执行完之后，如果其正常的执行到结尾，并结束，则只要第一个序列被继续执行，其也会被继续。

<!-- @code{TRY_FINALLY_EXPR} complicates the flow graph, since the cleanup -->
<!-- needs to appear on every edge out of the controlled block; this -->
<!-- reduces the freedom to move code across these edges.  Therefore, the -->
<!-- EH lowering pass which runs before most of the optimization passes -->
<!-- eliminates these expressions by explicitly adding the cleanup to each -->
<!-- edge.  Rethrowing the exception is represented using @code{RESX_EXPR}. -->
 <p><code>TRY_FINALLY_EXPR</code>使流图变得复杂，因为清除工作需要在流出控制块的每条边上都出现；这就减少了将代码跨越这些边进行移动的自由。因此，运行于大多数优化过程之前的EH下降过程，通过显式的增加对每个边的清除操作，来消除这些表达式。再次抛出异常使用<code>RESX_EXPR</code>来表示。

 </body></html>

