<html lang="zh">
<head>
<title>C Tests - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Testsuites.html#Testsuites" title="Testsuites">
<link rel="prev" href="Ada-Tests.html#Ada-Tests" title="Ada Tests">
<link rel="next" href="libgcj-Tests.html#libgcj-Tests" title="libgcj Tests">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2010 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.3版本或者之后的任何版本，对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="C-Tests"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="libgcj-Tests.html#libgcj-Tests">libgcj Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Ada-Tests.html#Ada-Tests">Ada Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Testsuites.html#Testsuites">Testsuites</a>
<hr>
</div>

<h3 class="section">7.4 C语言测试包</h3>

<!-- GCC contains the following C language testsuites, in the -->
<!-- @file{gcc/testsuite} directory: -->
<p>GCC在<samp><span class="file">gcc/testsuite</span></samp>目录下包含下列C语言测试包：

     <dl>
<dt><samp><span class="file">gcc.dg</span></samp><dd><!-- This contains tests of particular features of the C compiler, using the -->
<!-- more modern @samp{dg} harness.  Correctness tests for various compiler -->
<!-- features should go here if possible. -->
其包含了C编译器特定特征的测试，使用了较为现代的&lsquo;<samp><span class="samp">dg</span></samp>&rsquo;框架（harness）。如果可能的话，对各种编译器特征的正确性的测试应该放在这里。

     <!-- Magic comments determine whether the file -->
     <!-- is preprocessed, compiled, linked or run.  In these tests, error and warning -->
     <!-- message texts are compared against expected texts or regular expressions -->
     <!-- given in comments.  These tests are run with the options @samp{-ansi -pedantic} -->
     <!-- unless other options are given in the test.  Except as noted below they -->
     <!-- are not run with multiple optimization options. -->
     <p>魔术注释（Magic comments）决定了文件是否被预处理，编译，连接或运行。在这些测试中，错误和警告消息文本用来跟在注释中给出的预期文本或正规表达式作比较。这些测试使用选项&lsquo;<samp><span class="samp">-ansi -pedantic</span></samp>&rsquo;来运行，除非给出了其它选项。除了下面标注的以外，它们使用多个优化选项来运行。
<br><dt><samp><span class="file">gcc.dg/compat</span></samp><dd><!-- This subdirectory contains tests for binary compatibility using -->
<!-- @file{lib/compat.exp}, which in turn uses the language-independent support -->
<!-- (@pxref{compat Testing, , Support for testing binary compatibility}). -->
该子目录包含了使用<samp><span class="file">compat.exp</span></samp>的二进制兼容性测试，并且是使用语言无关的支持（参见<a href="compat-Testing.html#compat-Testing">Support for testing binary compatibility</a>）。
<br><dt><samp><span class="file">gcc.dg/cpp</span></samp><dd><!-- This subdirectory contains tests of the preprocessor. -->
该子目录包含了预处理器的测试。
<br><dt><samp><span class="file">gcc.dg/debug</span></samp><dd><!-- This subdirectory contains tests for debug formats.  Tests in this -->
<!-- subdirectory are run for each debug format that the compiler supports. -->
该子目录包含了调试格式的测试。该子目录下的测试用于编译器支持的每个调试格式。
<br><dt><samp><span class="file">gcc.dg/format</span></samp><dd><!-- This subdirectory contains tests of the @option{-Wformat} format -->
<!-- checking.  Tests in this directory are run with and without -->
<!-- @option{-DWIDE}. -->
该子目录包含了<samp><span class="option">-Wformat</span></samp>格式检测的测试。该目录下的测试分别使用和不使用<samp><span class="option">-DWIDE</span></samp>来运行。
<br><dt><samp><span class="file">gcc.dg/noncompile</span></samp><dd><!-- This subdirectory contains tests of code that should not compile and -->
<!-- does not need any special compilation options.  They are run with -->
<!-- multiple optimization options, since sometimes invalid code crashes -->
<!-- the compiler with optimization. -->
该子目录包含了不被编译并且不需要任何特定编译选项的测试。它们使用多个优化选项来运行，因为有时编译器的优化会使得代码崩溃。
<br><dt><samp><span class="file">gcc.dg/special</span></samp><dd><!-- FIXME: describe this. -->
FIXME: 对其进行描述。

     <br><dt><samp><span class="file">gcc.c-torture</span></samp><dd><!-- This contains particular code fragments which have historically broken easily. -->
<!-- These tests are run with multiple optimization options, so tests for features -->
<!-- which only break at some optimization levels belong here.  This also contains -->
<!-- tests to check that certain optimizations occur.  It might be worthwhile to -->
<!-- separate the correctness tests cleanly from the code quality tests, but -->
<!-- it hasn't been done yet. -->
该目录包含了以前很容易出现问题的代码片段。这些测试使用多个优化选项来运行，所以针对只在某个优化级别出问题的测试可以放到这里。该目录还包含了用于检查特定优化是否被执行了的测试。或许应该将正确性测试从代码质量测试中分离开，不过目前还没完成。

     <br><dt><samp><span class="file">gcc.c-torture/compat</span></samp><dd><!-- FIXME: describe this. -->
FIXME: 对其进行描述。

     <!-- This directory should probably not be used for new tests. -->
     <p>该目录应该不会被用于新的测试。
<br><dt><samp><span class="file">gcc.c-torture/compile</span></samp><dd><!-- This testsuite contains test cases that should compile, but do not -->
<!-- need to link or run.  These test cases are compiled with several -->
<!-- different combinations of optimization options.  All warnings are -->
<!-- disabled for these test cases, so this directory is not suitable if -->
<!-- you wish to test for the presence or absence of compiler warnings. -->
<!-- While special options can be set, and tests disabled on specific -->
<!-- platforms, by the use of @file{.x} files, mostly these test cases -->
<!-- should not contain platform dependencies.  FIXME: discuss how defines -->
<!-- such as @code{NO_LABEL_VALUES} and @code{STACK_SIZE} are used. -->
该测试包包含了应该编译，但不需要连接和运行的测试用例。这些测试用例使用多个不同优化选项组合来编译。所有的警告都被禁止，所以如果你想测试编译器警告是否存在，则这个目录不适合。虽然可以设置特定的选项，并且测试不是用于特定的平台，但大多数这些测试用例不应该包含平台依赖。FIXME：论述如何使用像<code>NO_LABEL_VALUES</code>和<code>STACK_SIZE</code>这样的定义。
<br><dt><samp><span class="file">gcc.c-torture/execute</span></samp><dd><!-- This testsuite contains test cases that should compile, link and run; -->
<!-- otherwise the same comments as for @file{gcc.c-torture/compile} apply. -->
该测试包包含了应该被编译，连接和运行的测试用例；否则跟<samp><span class="file">gcc.c-torture/compile</span></samp>相同的注释将会使用。
<br><dt><samp><span class="file">gcc.c-torture/execute/ieee</span></samp><dd><!-- This contains tests which are specific to IEEE floating point. -->
这包含了IEEE浮点特定的测试。
<br><dt><samp><span class="file">gcc.c-torture/unsorted</span></samp><dd><!-- FIXME: describe this. -->
FIXME: 对其进行描述。

     <!-- This directory should probably not be used for new tests. -->
     <p>该目录应该不会被用于新的测试。
<br><dt><samp><span class="file">gcc.misc-tests</span></samp><dd><!-- This directory contains C tests that require special handling.  Some -->
<!-- of these tests have individual expect files, and others share -->
<!-- special-purpose expect files: -->
该目录包含了需要特殊处理的C测试。其中的一些测试具有单独的expect文件，另一些则共享特殊用途的expect文件：

     <!-- @table @file -->
     <!-- @item @code{bprob*.c} -->
     <!-- @item @code{gcov*.c} -->
     <!-- @item @code{i386-pf-*.c} -->
     <!-- @end table -->
          <dl>
<dt><samp><code>bprob*.c</code></samp><dd><!-- Test @option{-fbranch-probabilities} using -->
<!-- @file{gcc.misc-tests/bprob.exp}, which -->
<!-- in turn uses the generic, language-independent framework -->
<!-- (@pxref{profopt Testing, , Support for testing profile-directed -->
<!-- optimizations}). -->
使用<samp><span class="file">bprob.exp</span></samp>来测试<samp><span class="option">-fbranch-probabilities</span></samp>，并且是使用通用的，语言无关的框架（参见<a href="profopt-Testing.html#profopt-Testing">Support for testing profile-directed optimizations</a>）。

          <br><dt><samp><code>gcov*.c</code></samp><dd><!-- Test @command{gcov} output using @file{gcov.exp}, which in turn uses the -->
<!-- language-independent support (@pxref{gcov Testing, , Support for testing gcov}). -->
使用<samp><span class="file">gcov.exp</span></samp>来测试<samp><span class="command">gcov</span></samp>输出，并且是使用语言无关的支持（参见<a href="gcov-Testing.html#gcov-Testing">Support for testing gcov</a>）。

          <br><dt><samp><code>i386-pf-*.c</code></samp><dd><!-- Test i386-specific support for data prefetch using @file{i386-prefetch.exp}. -->
使用<samp><span class="file">i386-prefetch.exp</span></samp>来测试i386特定的对数据预提取的支持。
</dl>

     <br><dt><samp><span class="file">gcc.test-framework</span></samp><dd>
          <dl>
<dt><samp><code>dg-*.c</code></samp><dd><!-- Test the testsuite itself using @file{gcc.test-framework/test-framework.exp}. -->
使用<samp><span class="file">gcc.test-framework/test-framework.exp</span></samp>来测试测试包本身。
</dl>

 </dl>

<!-- FIXME: merge in @file{testsuite/README.gcc} and discuss the format of -->
<!-- test cases and magic comments more. -->
 <p>FIXME: 合并到<samp><span class="file">testsuite/readme.gcc</span></samp>中，并进一步论述测试用例的格式和魔术注释。

<!-- @node libgcj Tests -->
<!-- @section The Java library testsuites. -->
 </body></html>

