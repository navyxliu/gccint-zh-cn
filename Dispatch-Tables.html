<html lang="zh">
<head>
<title>Dispatch Tables - GNU Compiler Collection (GCC) Internals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Compiler Collection (GCC) Internals">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Assembler-Format.html#Assembler-Format" title="Assembler Format">
<link rel="prev" href="Instruction-Output.html#Instruction-Output" title="Instruction Output">
<link rel="next" href="Exception-Region-Output.html#Exception-Region-Output" title="Exception Region Output">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
版权 (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2010 自由软件基金会

您可以依据自由软件基金会所发行的GNU自由文档授权1.3版本或者之后的任何版本，对本文档进行复制，分发和/或修改；其中不可变章节为"资助自由软件"，封面文字为 (a) (参见下面)，以及封底文字为 (b) (参见下面)。授权的副本要被包含在标题为"GNU自由文档授权"的章节中。

(a) FSF的封面文字为：

     GNU 手册

(b) FSF的封底文字为：

     您可以自由复制和修改本GNU手册，如同GNU软件。由自由软件基金会所发行的副本用于为GNU开发筹集资金。-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Dispatch-Tables"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Exception-Region-Output.html#Exception-Region-Output">Exception Region Output</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Instruction-Output.html#Instruction-Output">Instruction Output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Assembler-Format.html#Assembler-Format">Assembler Format</a>
<hr>
</div>

<h4 class="subsection">17.21.8 派遣表的输出</h4>

<!-- prevent bad page break with this line -->
<!-- This concerns dispatch tables. -->
<p>这些是关于派遣表的。

 <p><a name="index-dispatch-table-4604"></a>

<div class="defun">
&mdash; Macro: <b>ASM_OUTPUT_ADDR_DIFF_ELT</b> (<var>stream, body, value, rel</var>)<var><a name="index-ASM_005fOUTPUT_005fADDR_005fDIFF_005fELT-4605"></a></var><br>
<blockquote><!-- A C statement to output to the stdio stream @var{stream} an assembler -->
     <!-- pseudo-instruction to generate a difference between two labels. -->
     <!-- @var{value} and @var{rel} are the numbers of two internal labels.  The -->
     <!-- definitions of these labels are output using -->
     <!-- @code{(*targetm.asm_out.internal_label)}, and they must be printed in the same -->
     <!-- way here.  For example, -->
      <p>一条C语句，用来将汇编伪指令输出到stdio流<var>stream</var>中，
以生成两个标号间的距离。<var>value</var>和<var>rel</var>为两个内部标号的编号。
这些标号的定义通过使用<code>(*targetm.asm_out.internal_label)</code>来输出，
并且它们必须使用相同的方式打印。例如，

     <pre class="smallexample">          fprintf (<var>stream</var>, "\t.word L%d-L%d\n",
                   <var>value</var>, <var>rel</var>)
</pre>
      <!-- You must provide this macro on machines where the addresses in a -->
     <!-- dispatch table are relative to the table's own address.  If defined, GCC -->
     <!-- will also use this macro on all machines when producing PIC@. -->
     <!-- @var{body} is the body of the @code{ADDR_DIFF_VEC}; it is provided so that the -->
     <!-- mode and flags can be read. -->
      <p>在一些机器上，派遣表中的地址是相对于表自己的地址，对此你必须提供该宏。
如果定义，GCC还将在生成PIC的所有机器上使用该宏。
<var>body</var>为<code>ADDR_DIFF_VEC</code>的主体；提供它使得可以读取模式和标记。
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ASM_OUTPUT_ADDR_VEC_ELT</b> (<var>stream, value</var>)<var><a name="index-ASM_005fOUTPUT_005fADDR_005fVEC_005fELT-4606"></a></var><br>
<blockquote><!-- This macro should be provided on machines where the addresses -->
     <!-- in a dispatch table are absolute. -->
      <p>在一些机器上，派遣表中的地址为绝对地址，对此应该提供该宏。

     <!-- The definition should be a C statement to output to the stdio stream -->
     <!-- @var{stream} an assembler pseudo-instruction to generate a reference to -->
     <!-- a label.  @var{value} is the number of an internal label whose -->
     <!-- definition is output using @code{(*targetm.asm_out.internal_label)}. -->
     <!-- For example, -->
      <p>定义应该为一条C语句，用来将汇编伪指令输出到stdio流<var>stream</var>中，
以生成对一个标号的引用。<var>value</var>为内部标号的编号，
其定义应该使用<code>(*targetm.asm_out.internal_label)</code>输出。例如，

     <pre class="smallexample">          fprintf (<var>stream</var>, "\t.word L%d\n", <var>value</var>)
</pre>
      </blockquote></div>

<div class="defun">
&mdash; Macro: <b>ASM_OUTPUT_CASE_LABEL</b> (<var>stream, prefix, num, table</var>)<var><a name="index-ASM_005fOUTPUT_005fCASE_005fLABEL-4607"></a></var><br>
<blockquote><!-- Define this if the label before a jump-table needs to be output -->
     <!-- specially.  The first three arguments are the same as for -->
     <!-- @code{(*targetm.asm_out.internal_label)}; the fourth argument is the -->
     <!-- jump-table which follows (a @code{jump_insn} containing an -->
     <!-- @code{addr_vec} or @code{addr_diff_vec}). -->
      <p>定义该宏，如果在跳转表之前的标号需要被特殊输出。
前三个参数跟<code>(*targetm.asm_out.internal_label)</code>相同；
第四个参数为随后的跳转表（一个包含<code>addr_vec</code>或<code>addr_diff_vec</code>
的<code>jump_insn</code>）。

     <!-- This feature is used on system V to output a @code{swbeg} statement -->
     <!-- for the table. -->
      <p>该特点用于system V，来为table输出一条<code>swbeg</code>语句。

     <!-- If this macro is not defined, these labels are output with -->
     <!-- @code{(*targetm.asm_out.internal_label)}. -->
      <p>如果没有定义该宏，这些标号使用<code>(*targetm.asm_out.internal_label)</code>输出。
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ASM_OUTPUT_CASE_END</b> (<var>stream, num, table</var>)<var><a name="index-ASM_005fOUTPUT_005fCASE_005fEND-4608"></a></var><br>
<blockquote><!-- Define this if something special must be output at the end of a -->
     <!-- jump-table.  The definition should be a C statement to be executed -->
     <!-- after the assembler code for the table is written.  It should write -->
     <!-- the appropriate code to stdio stream @var{stream}.  The argument -->
     <!-- @var{table} is the jump-table insn, and @var{num} is the label-number -->
     <!-- of the preceding label. -->
      <p>定义该宏，如果在跳转表的结尾必须输出一些特殊的东西。定义应该为一条C语句，
在写完table的汇编代码后被执行。其应该将适当的代码写入到stdio流<var>stream</var>中。
参数<var>table</var>为jump-table insn，<var>num</var>为前面的标号的编号。

     <!-- If this macro is not defined, nothing special is output at the end of -->
     <!-- the jump-table. -->
      <p>如果没有定义该宏，在跳转表的结尾不输出任何特殊的东西。
</p></blockquote></div>

<div class="defun">
&mdash; Target Hook: void <b>TARGET_ASM_EMIT_UNWIND_LABEL</b> (<var>FILE *stream, tree decl, int for_eh, int empty</var>)<var><a name="index-TARGET_005fASM_005fEMIT_005fUNWIND_005fLABEL-4609"></a></var><br>
<blockquote><!-- This target hook emits a label at the beginning of each FDE@.  It -->
     <!-- should be defined on targets where FDEs need special labels, and it -->
     <!-- should write the appropriate label, for the FDE associated with the -->
     <!-- function declaration @var{decl}, to the stdio stream @var{stream}. -->
     <!-- The third argument, @var{for_eh}, is a boolean: true if this is for an -->
     <!-- exception table.  The fourth argument, @var{empty}, is a boolean: -->
     <!-- true if this is a placeholder label for an omitted FDE@. -->
      <p>该target钩子在每个FDE的起始处生成一个标号。在一些target上，FDE需要特殊的标号，
对此应该定义该宏。其应该为函数声明<var>decl</var>相关联的FDE写入适当的标号到stdio流
<var>stream</var>中。第三个参数，<var>for_eh</var>，为一个布尔值；当是异常表时为真。
第四个参数<var>empty</var>，为一个布尔值；当是一个省略掉的FDE的占位符标号时为真。

     <!-- The default is that FDEs are not given nonlocal labels. -->
      <p>缺省为FDE不给出非局部标号。
</p></blockquote></div>

<div class="defun">
&mdash; Target Hook: void <b>TARGET_ASM_EMIT_EXCEPT_TABLE_LABEL</b> (<var>FILE *stream</var>)<var><a name="index-TARGET_005fASM_005fEMIT_005fEXCEPT_005fTABLE_005fLABEL-4610"></a></var><br>
<blockquote><!-- This target hook emits a label at the beginning of the exception table. -->
     <!-- It should be defined on targets where it is desirable for the table -->
     <!-- to be broken up according to function. -->
      <p>该target钩子在异常表的起始处生成一个标号。在一些target上，
异常表需要根据函数被分割开，对此应该定义该宏。

      <p>The default is that no label is emitted. 
缺省为不生成标号。
</p></blockquote></div>

<div class="defun">
&mdash; Target Hook: void <b>TARGET_ASM_EMIT_EXCEPT_PERSONALITY</b> (<var>rtx personality</var>)<var><a name="index-TARGET_005fASM_005fEMIT_005fEXCEPT_005fPERSONALITY-4611"></a></var><br>
<blockquote><p>If the target implements <code>TARGET_ASM_UNWIND_EMIT</code>, this hook may be used to emit a directive to install a personality hook into the unwind info.  This hook should not be used if dwarf2 unwind info is used. 
</p></blockquote></div>

<div class="defun">
&mdash; Target Hook: void <b>TARGET_ASM_UNWIND_EMIT</b> (<var>FILE *stream, rtx insn</var>)<var><a name="index-TARGET_005fASM_005fUNWIND_005fEMIT-4612"></a></var><br>
<blockquote><!-- This target hook emits assembly directives required to unwind the -->
     <!-- given instruction.  This is only used when @code{TARGET_EXCEPT_UNWIND_INFO} -->
     <!-- returns @code{UI_TARGET}. -->
      <p>该target钩子生成需要展开给定指定的汇编伪指令。这只在当<code>TARGET_EXCEPT_UNWIND_INFO</code>返回<code>UI_TARGET</code>的时候才被使用。
</p></blockquote></div>

<div class="defun">
&mdash; Target Hook: bool <b>TARGET_ASM_UNWIND_EMIT_BEFORE_INSN</b><var><a name="index-TARGET_005fASM_005fUNWIND_005fEMIT_005fBEFORE_005fINSN-4613"></a></var><br>
<blockquote><p>True if the <code>TARGET_ASM_UNWIND_EMIT</code> hook should be called before the assembly for <var>insn</var> has been emitted, false if the hook should be called afterward. 
</p></blockquote></div>

<!-- @node Exception Region Output -->
<!-- @subsection Assembler Commands for Exception Regions -->
 </body></html>

